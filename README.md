# ECG_analysis

In this repository I've presented a little example on how to work with ECG recordings. In the colab notebook uploaded an example of the code as well as the pipeline followed can be observed. 
I've also uploaded a .html report extracted from the database generated.

The main topics that I've worked in have been:
* Database extraction from the .hea files
* Loading recording with the wtdb package
![Reading](example_of_recording_reading.png)
* Processing recordings sequentally by bandpass filtering, derivative filtering, squaring and integration
![Processing](example_steps.png)
* Detection of QRS complexes
![QRS_1](Example_of_QRS_detection.png)
![QRS_2](Example_of_QRS_detection_0.png)

* Extracting RR, QR , RS and QRS measurements and poincaré plots
|    | Patient    |    age |  sex   |  ECG date           |  Diagnose   |  Reason for admission   |  Acute infarction (localization)   |  Former infarction (localization)   |  Additional diagnoses   |  Smoker   |    Number of coronary vessels involved |  Infarction date (acute)   |  Previous infarction (1) date   |  Previous infarction (2) date   |  Hemodynamics   |  Ventriculography                    |  Chest X-ray   |  Peripheral blood Pressure (syst/diast)   |  Pulmonary artery pressure (at rest) (syst/diast)   |  Pulmonary artery pressure (at rest) (mean)   |  Pulmonary capillary wedge pressure (at rest)   |  Cardiac output (at rest)   |  Cardiac index (at rest)   |  Stroke volume index (at rest)   |  Pulmonary artery pressure (laod) (syst/diast)   |  Pulmonary artery pressure (laod) (mean)   |  Pulmonary capillary wedge pressure (load)   |  Cardiac output (load)   |  Cardiac index (load)   |  Stroke volume index (load)   |    Aorta (at rest) (syst/diast) |    Aorta (at rest) mean |    Left ventricular enddiastolic pressure |  Left coronary artery stenoses (RIVA)   |  Left coronary artery stenoses (RCX)   |  Right coronary artery stenoses (RCA)              |  Echocardiography   |  Therapy   |  Infarction date    |  Admission date     |  Medication pre admission   |  Start lysis therapy (hh.mm)   |  Lytic agent   |  Dosage (lytic agent)   |  Additional medication                          |  In hospital medication   |  Medication after discharge   | Catetherization date   |   Heart Rate |   Heart Beats |   Average_RR_interval(ms) |    SDRR |   QR_interval |   RS_interval |   QRS_time |
|---:|:-----------|-------:|:-------|:--------------------|:------------|:------------------------|:-----------------------------------|:------------------------------------|:------------------------|:----------|---------------------------------------:|:---------------------------|:--------------------------------|:--------------------------------|:----------------|:-------------------------------------|:---------------|:------------------------------------------|:----------------------------------------------------|:----------------------------------------------|:------------------------------------------------|:----------------------------|:---------------------------|:---------------------------------|:-------------------------------------------------|:-------------------------------------------|:---------------------------------------------|:-------------------------|:------------------------|:------------------------------|--------------------------------:|------------------------:|------------------------------------------:|:----------------------------------------|:---------------------------------------|:---------------------------------------------------|:--------------------|:-----------|:--------------------|:--------------------|:----------------------------|:-------------------------------|:---------------|:------------------------|:------------------------------------------------|:--------------------------|:------------------------------|:-----------------------|-------------:|--------------:|--------------------------:|--------:|--------------:|--------------:|-----------:|
|  0 | patient122 |     68 | male   | 1992-07-21 00:00:00 |             | Healthy control         | no                                 | no                                  | no                      | nan       |                                    nan | NaT                        | NaT                             | NaT                             |                 | nan                                  | nan            | nan                                       | nan                                                 | nan                                           | nan                                             | nan                         | nan                        | nan                              | nan                                              | nan                                        | nan                                          | nan                      | nan                     | nan                           |                             nan |                     nan |                                       nan | nan                                     | nan                                    | nan                                                | nan                 |            | NaT                 | NaT                 | nan                         | nan                            | nan            | nan                     | nan                                             | nan                       | nan                           | NaT                    |      66.3915 |           127 |                   903.73  | 39.0889 |       34.1732 |       27.5433 |    61.7165 |
|  0 | patient206 |     32 | male   | 1996-03-05 00:00:00 |             | Bundle branch block     | no                                 | no                                  | Tinnitus                | no        |                                    nan | NaT                        | NaT                             | NaT                             |                 | nan                                  | nan            | nan                                       | nan                                                 | nan                                           | nan                                             | nan                         | nan                        | nan                              | nan                                              | nan                                        | nan                                          | nan                      | nan                     | nan                           |                             nan |                     nan |                                       nan | nan                                     | nan                                    | nan                                                | no Echo             |            | NaT                 | NaT                 | nan                         | nan                            | nan            | nan                     | nan                                             | nan                       | nan                           | NaT                    |      70.5947 |           142 |                   849.922 | 40.3636 |     -565.915  |     -190.197  |  -756.113  |
|  0 | patient065 |     52 | male   | 1991-09-18 00:00:00 |             | Myocardial infarction   | infero-postero-lateral             | no                                  | no                      | no        |                                      1 | 1991-09-13 00:00:00        | NaT                             | NaT                             |                 | Akinesia infero-postero-lateral wall | normal         | 110/70 mmHg                               | 25/10 cmH2O                                         | 16 cmH2O                                      | 21 cmH2O                                        | 7,55 l/min                  | 3,1 l/min/sqrmBSA          | 47.0 ml/beat                     | 58/24 cmH2O                                      | 40 cmH2O                                   | 30 cmH2O                                     | 12,96 l/min              | 5,9 l/min/sqrmBSA       | 54,5 ml/beat                  |                             nan |                     nan |                                       nan | No stenoses                             | No stenoses                            | RCA proximal to ramus ventricularis posterior 100% | nan                 |            | 1991-09-13 00:00:00 | 1991-09-13 00:00:00 | -                           | 08:45                          | Gamma-TPA      | 100 mg                  | ASA Metoprolol Isosorbit-Mononitrate Molsidomin | ASA                       | ASA ACE-Hemmer                | 1991-09-23 00:00:00    |      72.5018 |           139 |                   827.565 | 20.1087 |       48.4892 |       27.9065 |    76.3957 |
|  0 | patient065 |     52 | male   | 1991-09-20 00:00:00 |             | Myocardial infarction   | infero-postero-lateral             | no                                  | no                      | no        |                                      1 | 1991-09-13 00:00:00        | NaT                             | NaT                             |                 | Akinesia infero-postero-lateral wall | normal         | 110/70 mmHg                               | 25/10 cmH2O                                         | 16 cmH2O                                      | 21 cmH2O                                        | 7,55 l/min                  | 3,1 l/min/sqrmBSA          | 47.0 ml/beat                     | 58/24 cmH2O                                      | 40 cmH2O                                   | 30 cmH2O                                     | 12,96 l/min              | 5,9 l/min/sqrmBSA       | 54,5 ml/beat                  |                             nan |                     nan |                                       nan | No stenoses                             | No stenoses                            | RCA proximal to ramus ventricularis posterior 100% | nan                 |            | 1991-09-13 00:00:00 | 1991-09-13 00:00:00 | -                           | 08:45                          | Gamma-TPA      | 100 mg                  | ASA Metoprolol Isosorbit-Mononitrate Molsidomin | ASA                       | ASA ACE-Hemmer                | 1991-09-23 00:00:00    |      70.4814 |           136 |                   851.289 | 44.8669 |       39.8162 |       41.1765 |    80.9926 |
|  0 | patient065 |     52 | male   | 1992-03-25 00:00:00 |             | Myocardial infarction   | infero-postero-lateral             | no                                  | no                      | no        |                                      1 | 1991-09-13 00:00:00        | NaT                             | NaT                             |                 | Akinesia infero-postero-lateral wall | normal         | 110/70 mmHg                               | 25/10 cmH2O                                         | 16 cmH2O                                      | 21 cmH2O                                        | 7,55 l/min                  | 3,1 l/min/sqrmBSA          | 47.0 ml/beat                     | 58/24 cmH2O                                      | 40 cmH2O                                   | 30 cmH2O                                     | 12,96 l/min              | 5,9 l/min/sqrmBSA       | 54,5 ml/beat                  |                             nan |                     nan |                                       nan | No stenoses                             | No stenoses                            | RCA proximal to ramus ventricularis posterior 100% | nan                 |            | 1991-09-13 00:00:00 | 1991-09-13 00:00:00 | -                           | 08:45                          | Gamma-TPA      | 100 mg                  | ASA Metoprolol Isosorbit-Mononitrate Molsidomin | ASA                       | ASA ACE-Hemmer                | 1991-09-23 00:00:00    |      54.5917 |           105 |                  1099.07  | 82.9388 |       60.5048 |       29.3238 |    89.8286 |
![QRS_1](Example_poincaré_1.png)
![QRS_2](Example_poincaré_2.png)
* Report
[click here](DB_analysis.html)
* Future steps
![Happy Christmas](Christmas.png)
